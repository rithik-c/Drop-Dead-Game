<body>

  <div style="background-color: #fff; width: 300px; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); display: inline-block;">
    <h1 style="color: #333;">Login</h1>
    
    <!-- Single Form for Both Login and Guest Login -->
    <form id="login-form" action="<%= login_path %>" method="post" style="text-align: left;">

      <label for="email" style="font-weight: bold;">Email:</label><br>
      <input type="email" id="email" name="email" required 
        style="width: calc(100% - 20px); padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px;"><br>

      <label for="password" style="font-weight: bold;">Password:</label><br>
      <input type="password" id="password" name="password" required 
        style="width: calc(100% - 20px); padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px;"><br>

      <div style="display: flex; justify-content: space-between; gap: 10px; flex-wrap: wrap;">
        <!-- Sign In Button -->
        <button type="submit" id="login-button" 
          style="background-color: #333; color: #fff; padding: 10px 20px; margin: 10px 0 0 0; border: none; border-radius: 5px; cursor: pointer;">
          Sign In
        </button>

        <!-- Play As Guest Button -->
        <button type="button" id="guest-button" 
          style="background-color:rgb(113, 113, 113); color: #fff; padding: 10px 20px; margin: 10px 0 0 10px; border: none; border-radius: 5px; cursor: pointer;">
          Play As Guest
        </button>
      </div>

    </form>

    <p style="margin-top: 15px;">Don't have an account? 
      <a href="/signup" style="color: #474747; text-decoration: underline;">Sign Up</a>
    </p>
  </div>

  <!-- JavaScript for Dynamic Guest Login -->
  <script>
    document.getElementById("guest-button").addEventListener("click", function() {
      let form = document.getElementById("login-form");

      // Change form action to guest login route
      form.action = "<%= guest_login_path %>";

      // Disable required fields to prevent validation issues
      document.getElementById("email").removeAttribute("required");
      document.getElementById("password").removeAttribute("required");

      // Submit the form
      form.submit();
    });

    // Ensure normal login restores the correct form action and required fields
    document.getElementById("login-button").addEventListener("click", function() {
      let form = document.getElementById("login-form");

      // Reset the form action back to normal login
      form.action = "<%= login_path %>";

      // Re-enable required fields
      document.getElementById("email").setAttribute("required", "true");
      document.getElementById("password").setAttribute("required", "true");
    });
  </script>

</body>
